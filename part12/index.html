
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>12. Test cases and packages installation Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="./" />
    
    
    <link rel="prev" href="../part11/" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../part1/">
            
                <a href="../part1/#1">
            
                    
                    1. What is Intel Cloud-Client AI Service Framework (CCAI)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../part2/">
            
                <a href="../part2/#2">
            
                    
                    2. How does CCAI work
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../part2/">
            
                <a href="../part2/#2_1">
            
                    
                    2.1 The high level call flow of CCAI (1.3 release)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../part2/">
            
                <a href="../part2/#2_2">
            
                    
                    2.2 CCAI (1.3 release) stack architecture
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../part3/">
            
                <a href="../part3/#3">
            
                    
                    3. Integrate and use CCAI runtime environment
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../part3/">
            
                <a href="../part3/#3_1">
            
                    
                    3.1 How to install the pre-built runtime (if have) and verify it quickly
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="../part3/">
            
                <a href="../part3/#3_1_1">
            
                    
                    3.1.1 Prepare
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.2" data-path="../part3/">
            
                <a href="../part3/#3_1_2">
            
                    
                    3.1.2 Proxy setting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.3" data-path="../part3/">
            
                <a href="../part3/#3_1_3">
            
                    
                    3.1.3 Container image preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.4" data-path="../part3/">
            
                <a href="../part3/#3_1_4">
            
                    
                    3.1.4 Download and install service-framework packages/test cases/docker files in host
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.5" data-path="../part3/">
            
                <a href="../part3/#3_1_5">
            
                    
                    3.1.5 Start/Stop service-framework
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../part3/">
            
                <a href="../part3/#3_2">
            
                    
                    3.2 Verify CCAI functions with samples or test cases
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../part4/">
            
                <a href="../part4/#4">
            
                    
                    4. How to setup development environment
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../part4/">
            
                <a href="../part4/#4_1">
            
                    
                    4.1 Download and run development docker image
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../part4/">
            
                <a href="../part4/#4_2">
            
                    
                    4.2 Enter development container environment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../part4/">
            
                <a href="../part4/#4_3">
            
                    
                    4.3 Setup development environment directly in your machine
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../part4/">
            
                <a href="../part4/#4_4">
            
                    
                    4.4 Setup the Pulseaudio service
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../part5/">
            
                <a href="../part5/#5">
            
                    
                    5. How to generate CCAI packages and container image
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../part5/">
            
                <a href="../part5/#5_1">
            
                    
                    5.1 Build CCAI packages and generate CCAI container image form pre-built binaries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../part5/">
            
                <a href="../part5/#5_2">
            
                    
                    5.2 How to build from source
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.2.1" data-path="../part5/">
            
                <a href="../part5/#5_2_1">
            
                    
                    5.2.1 download initial project - container
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.2" data-path="../part5/">
            
                <a href="../part5/#5_2_2">
            
                    
                    5.2.2 build host packages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.3" data-path="../part5/">
            
                <a href="../part5/#5_2_3">
            
                    
                    5.2.3 install CCAI services and image on host
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../part5/">
            
                <a href="../part5/#5_3">
            
                    
                    5.3 How to check all component versions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../part5/">
            
                <a href="../part5/#5_4">
            
                    
                    5.4 Generate CCAI OTA image
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../part6/">
            
                <a href="../part6/#6">
            
                    
                    6. How to develop AI services for CCAI
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../part6/">
            
                <a href="../part6/#6_1">
            
                    
                    6.1 CCAI service work mode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../part6/">
            
                <a href="../part6/#6_2">
            
                    
                    6.2 Preparation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.2.1" data-path="../part6/">
            
                <a href="../part6/#6_2_1">
            
                    
                    6.2.1 Using OpenVINO as inference engine in CCAI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2.2" data-path="../part6/">
            
                <a href="../part6/#6_2_2">
            
                    
                    6.2.2 Using PyTorch as inference engine in CCAI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2.3" data-path="../part6/">
            
                <a href="../part6/#6_2_3">
            
                    
                    6.2.3 Using ONNX runtime as inference engine in CCAI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2.4" data-path="../part6/">
            
                <a href="../part6/#6_2_4">
            
                    
                    6.2.4 Using TensorFlow as inference engine in CCAI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2.5" data-path="../part6/">
            
                <a href="../part6/#6_2_5">
            
                    
                    6.2.5 Using PaddlePaddle as inference engine in CCAI
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../part6/">
            
                <a href="../part6/#6_3">
            
                    
                    6.3 Development services
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.3.1" data-path="../part6/">
            
                <a href="../part6/#6_3_1">
            
                    
                    6.3.1 Develop FCGI service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.2" data-path="../part6/">
            
                <a href="../part6/#6_3_2">
            
                    
                    6.3.2 Develop gRPC service
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../part6/">
            
                <a href="../part6/#6_4">
            
                    
                    6.4 Deploy services for CCAI
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.4.1" data-path="../part6/">
            
                <a href="../part6/#6_4_1">
            
                    
                    6.4.1 Deploy into container
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.2" data-path="../part6/">
            
                <a href="../part6/#6_4_2">
            
                    
                    6.4.2 Deploy on host
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.3" data-path="../part6/">
            
                <a href="../part6/#6_4_3">
            
                    
                    6.4.3 Specific to PyTorch service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.4" data-path="../part6/">
            
                <a href="../part6/#6_4_4">
            
                    
                    6.4.4 Specific to Onnx service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.5" data-path="../part6/">
            
                <a href="../part6/#6_4_5">
            
                    
                    6.4.5 Specific to Tensorflow service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.6" data-path="../part6/">
            
                <a href="../part6/#6_4_6">
            
                    
                    6.4.6 Specific to PaddlePaddle service
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="../part6/">
            
                <a href="../part6/#6_5">
            
                    
                    6.5 Sample: Add a service for CCAI
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.5.1" data-path="../part6/">
            
                <a href="../part6/#6_5_1">
            
                    
                    6.5.1 Install packages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5.2" data-path="../part6/">
            
                <a href="../part6/#6_5_2">
            
                    
                    6.5.2 Compose the header file
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5.3" data-path="../part6/">
            
                <a href="../part6/#6_5_3">
            
                    
                    6.5.3 Extract service runtime library from CCAI container
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5.4" data-path="../part6/">
            
                <a href="../part6/#6_5_4">
            
                    
                    6.5.4 Write the main source code
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5.5" data-path="../part6/">
            
                <a href="../part6/#6_5_5">
            
                    
                    6.5.5 Build the program
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5.6" data-path="../part6/">
            
                <a href="../part6/#6_5_6">
            
                    
                    6.5.6 Write the configuration file
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5.7" data-path="../part6/">
            
                <a href="../part6/#6_5_7">
            
                    
                    6.5.7 Build docker image
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5.8" data-path="../part6/">
            
                <a href="../part6/#6_5_8">
            
                    
                    6.5.8 Test
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../part7/">
            
                <a href="../part7/#7">
            
                    
                    7. How to use AI services provided by CCAI
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../part7/">
            
                <a href="../part7/#7_1">
            
                    
                    7.1 Request serving via REST APIs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../part7/">
            
                <a href="../part7/#7_2">
            
                    
                    7.2 Request serving via gRPC APIs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../part7/">
            
                <a href="../part7/#7_3">
            
                    
                    7.3 Proxy setting
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../part8/">
            
                <a href="../part8/#8">
            
                    
                    8. How to integrate new AI services with CCAI framework
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../part8/">
            
                <a href="../part8/#8_1">
            
                    
                    8.1 Where to put those services file to
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../part8/">
            
                <a href="../part8/#8_2">
            
                    
                    8.2 Where to put related Neural Network Models file
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../part8/">
            
                <a href="../part8/#8_3">
            
                    
                    8.3 How to enable services via API gateway
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="../part8/">
            
                <a href="../part8/#8_4">
            
                    
                    8.4 How to generate new container image
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../part9/">
            
                <a href="../part9/#9">
            
                    
                    9. How to enable Encryption and Authentication for CCAI
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../part9/">
            
                <a href="../part9/#9_1">
            
                    
                    9.1 Encryption
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../part9/">
            
                <a href="../part9/#9_2">
            
                    
                    9.2 Enable authentication
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../part10/">
            
                <a href="../part10/#10">
            
                    
                    10. How to enable DNS interception
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../part11/">
            
                <a href="../part11/#11">
            
                    
                    11. APIs Reference List
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../part11/">
            
                <a href="../part11/#11_1">
            
                    
                    11.1 FCGI APIs Manual
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1.1" data-path="../part11/">
            
                <a href="../part11/#11_1_1">
            
                    
                    11.1.1 TTS API usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.2" data-path="../part11/">
            
                <a href="../part11/#11_1_2">
            
                    
                    11.1.2 ASR API usage (offline ASR case)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.3" data-path="../part11/">
            
                <a href="../part11/#11_1_3">
            
                    
                    11.1.3 API in Speech sample
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.4" data-path="../part11/">
            
                <a href="../part11/#11_1_4">
            
                    
                    11.1.4 Policy API usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.5" data-path="../part11/">
            
                <a href="../part11/#11_1_5">
            
                    
                    11.1.5 Classification API usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.6" data-path="../part11/">
            
                <a href="../part11/#11_1_6">
            
                    
                    11.1.6 Face Detection API usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.7" data-path="../part11/">
            
                <a href="../part11/#11_1_7">
            
                    
                    11.1.7 Facial Landmark API usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.8" data-path="../part11/">
            
                <a href="../part11/#11_1_8">
            
                    
                    11.1.8 OCR API usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.9" data-path="../part11/">
            
                <a href="../part11/#11_1_9">
            
                    
                    11.1.9 formula API usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.10" data-path="../part11/">
            
                <a href="../part11/#11_1_10">
            
                    
                    11.1.10 handwritten API usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.11" data-path="../part11/">
            
                <a href="../part11/#11_1_11">
            
                    
                    11.1.11 ppocr API usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.12" data-path="../part11/">
            
                <a href="../part11/#11_1_12">
            
                    
                    11.1.12 segmentation API usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.13" data-path="../part11/">
            
                <a href="../part11/#11_1_13">
            
                    
                    11.1.13 super resolution API usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.14" data-path="../part11/">
            
                <a href="../part11/#11_1_14">
            
                    
                    11.1.14 digitalnote API usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.15" data-path="../part11/">
            
                <a href="../part11/#11_1_15">
            
                    
                    11.1.15 Video pipeline management (control) API usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.16" data-path="../part11/">
            
                <a href="../part11/#11_1_16">
            
                    
                    11.1.16 Live ASR API usage (online ASR case)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.17" data-path="../part11/">
            
                <a href="../part11/#11_1_17">
            
                    
                    11.1.17 Pose estimation API usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.18" data-path="../part11/">
            
                <a href="../part11/#11_1_18">
            
                    
                    11.1.18 Capability API usage
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../part11/">
            
                <a href="../part11/#11_2">
            
                    
                    11.2 gRPC APIs Manual
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.2.1" data-path="../part11/">
            
                <a href="../part11/#11_2_1">
            
                    
                    11.2.1 proto file
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2.2" data-path="../part11/">
            
                <a href="../part11/#11_2_2">
            
                    
                    11.2.2 OCR method
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2.3" data-path="../part11/">
            
                <a href="../part11/#11_2_3">
            
                    
                    11.2.3 ASR method
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2.4" data-path="../part11/">
            
                <a href="../part11/#11_2_4">
            
                    
                    11.2.4 Classification method
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2.5" data-path="../part11/">
            
                <a href="../part11/#11_2_5">
            
                    
                    11.2.5 FaceDetection method
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2.6" data-path="../part11/">
            
                <a href="../part11/#11_2_6">
            
                    
                    11.2.6 FacialLandmark method
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="../part11/">
            
                <a href="../part11/#11_3">
            
                    
                    11.3 Low level APIs Manual
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.3.1" data-path="../part11/">
            
                <a href="../part11/#11_3_1">
            
                    
                    11.3.1 C++ APIs for Openvino Backend Engine(Version 0)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.3.1.1" data-path="../part11/">
            
                <a href="../part11/#11_3_1_1">
            
                    
                    11.3.1.1 Return value (deprecated)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3.1.2" data-path="../part11/">
            
                <a href="../part11/#11_3_1_2">
            
                    
                    11.3.1.2 Server parameter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3.1.3" data-path="../part11/">
            
                <a href="../part11/#11_3_1_3">
            
                    
                    11.3.1.3 Policy configuration API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3.1.4" data-path="../part11/">
            
                <a href="../part11/#11_3_1_4">
            
                    
                    11.3.1.4 image API (deprecated)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3.1.5" data-path="../part11/">
            
                <a href="../part11/#11_3_1_5">
            
                    
                    11.3.1.5 ASR API (deprecated)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3.1.6" data-path="../part11/">
            
                <a href="../part11/#11_3_1_6">
            
                    
                    11.3.1.6 common API (deprecated)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3.1.7" data-path="../part11/">
            
                <a href="../part11/#11_3_1_7">
            
                    
                    11.3.1.7 video API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3.1.8" data-path="../part11/">
            
                <a href="../part11/#11_3_1_8">
            
                    
                    11.3.1.8 Load Openvino Model from Buffer API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3.1.9" data-path="../part11/">
            
                <a href="../part11/#11_3_1_9">
            
                    
                    11.3.1.9 Configure a temporary inference device API
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12.3.2" data-path="../part11/">
            
                <a href="../part11/#11_3_2">
            
                    
                    11.3.2 Python API
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.3.2.1" data-path="../part11/">
            
                <a href="../part11/#11_3_2_1">
            
                    
                    11.3.2.1 Image API(deprecated)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3.2.2" data-path="../part11/">
            
                <a href="../part11/#11_3_2_2">
            
                    
                    11.3.2.2 Image API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3.2.3" data-path="../part11/">
            
                <a href="../part11/#11_3_2_3">
            
                    
                    11.3.2.3 ASR API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3.2.4" data-path="../part11/">
            
                <a href="../part11/#11_3_2_4">
            
                    
                    11.3.2.4 Common API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3.2.5" data-path="../part11/">
            
                <a href="../part11/#11_3_2_5">
            
                    
                    11.3.2.5 Policy configuration API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3.2.6" data-path="../part11/">
            
                <a href="../part11/#11_3_2_6">
            
                    
                    11.3.2.6 Set temporary inference device API
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12.3.3" data-path="../part11/">
            
                <a href="../part11/#11_3_3">
            
                    
                    11.3.3 C++ APIs for Different backend Engines (Version 1)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.3.3.1" data-path="../part11/">
            
                <a href="../part11/#11_3_3_1">
            
                    
                    11.3.3.1 Return Value
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3.3.2" data-path="../part11/">
            
                <a href="../part11/#11_3_3_2">
            
                    
                    11.3.3.2 Inference Engines
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3.3.3" data-path="../part11/">
            
                <a href="../part11/#11_3_3_3">
            
                    
                    11.3.3.3 Image API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3.3.4" data-path="../part11/">
            
                <a href="../part11/#11_3_3_4">
            
                    
                    11.3.3.4 Speech API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3.3.5" data-path="../part11/">
            
                <a href="../part11/#11_3_3_5">
            
                    
                    11.3.3.5 Common API
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12.3.4" data-path="../part11/">
            
                <a href="../part11/#11_3_4">
            
                    
                    11.3.4 Video pipeline management (construct) APIs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="../part11/">
            
                <a href="../part11/#11_4">
            
                    
                    11.4 How to extend video pipeline with video pipeline manager
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.4.1" data-path="../part11/">
            
                <a href="../part11/#11_4_1">
            
                    
                    11.4.1 construct the plugin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4.2" data-path="../part11/">
            
                <a href="../part11/#11_4_2">
            
                    
                    11.4.2 Build the plugin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4.3" data-path="../part11/">
            
                <a href="../part11/#11_4_3">
            
                    
                    11.4.3 Install the plugin to destination
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4.4" data-path="../part11/">
            
                <a href="../part11/#11_4_4">
            
                    
                    11.4.4 Test your plugin
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../part11/">
            
                <a href="../part11/#12">
            
                    
                    11.5 Smart Photo Search
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="./">
            
                <a href="./#12">
            
                    
                    12. Test cases and packages installation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="./">
            
                <a href="./#12_1">
            
                    
                    12.1 Enabled services for testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2" data-path="./">
            
                <a href="./#12_2">
            
                    
                    12.2 High Level APIs test cases
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.2.1" data-path="./">
            
                <a href="./#12_2_1">
            
                    
                    12.2.1 For testing all provided API in a bunch
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2.2" data-path="./">
            
                <a href="./#12_2_2">
            
                    
                    12.2.2 For testing python implementation of related REST APIs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2.3" data-path="./">
            
                <a href="./#12_2_3">
            
                    
                    12.2.3 For testing C++ implementation of related REST APIs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2.4" data-path="./">
            
                <a href="./#12_2_4">
            
                    
                    12.2.4 For testing C++ implementation of related gRPC APIs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14.3" data-path="./">
            
                <a href="./#12_3">
            
                    
                    12.3 Health-monitor mechanism test case
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.3.1" data-path="./">
            
                <a href="./#12_3_1">
            
                    
                    12.3.1 Test case
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.3.2" data-path="./">
            
                <a href="./#12_3_2">
            
                    
                    12.3.2 How it works (in brief)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14.4" data-path="./">
            
                <a href="./#12_4">
            
                    
                    12.4 Deb package for host installed application/service (if not install yet)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.5" data-path="./">
            
                <a href="./#12_5">
            
                    
                    12.5 Deb package for host installed neural network models (if not install yet)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >12. Test cases and packages installation</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="12-test-cases-and-packages-installation-">12. Test cases and packages installation <div id="12"></div></h1>
<h2 id="121-enabled-services-for-testing-">12.1 Enabled services for testing <div id="12_1"></div></h2>
<p>For making the deliverables unified but still easy to validate basic functions of CCAI framework, we disabled all sample services by default from version 1.0-210201 due to, on the current stage, no landed user cases from customers.
For testing purpose, to enable services, use these steps:</p>
<pre><code>    #Create a folder on the host side under &apos;/opt/intel/service_runtime&apos;.
    $&gt;sudo mkdir -p /opt/intel/service_runtime/rootfs/d/etc/runit/runsvdir/default
    $&gt;sudo chown www-data.www-data /opt/intel/service_runtime/rootfs/d/etc/runit/runsvdir/default

    #Create the health monitor configuration file.
    $&gt;sudo mkdir -p /opt/intel/service_runtime/rootfs/f/opt/health_monitor
    $&gt;sudo bash -c &apos;cat &gt; /opt/intel/service_runtime/rootfs/f/opt/health_monitor/config.yml &lt;&lt; &quot;EOF&quot;
    daemon_targets:
    - lighttpd
    - policy_daemon
    grpc_targets:
    fcgi_targets:
    - fcgi_ocr.py
    - fcgi_ocr
    EOF&apos;

    $&gt;sudo chown -R www-data.www-data /opt/intel/service_runtime/rootfs/f/opt/health_monitor
</code></pre><p>replace/add/remove services in above &quot;fcgi_targets:&quot; section will replace/enable/disable related services from health_monitor list. For version 1.0-210201, now you can use 3 services as:</p>
<p>- fcgi_ocr.py</p>
<p>- fcgi_ocr</p>
<p>- fcgi_tts.py <strong>(Please noted, there is no fcgi_tts)</strong></p>
<p>- fcgi_speech <strong>(Please noted, there is no fcgi_speech.py)</strong></p>
<pre><code>    #Restart container, and enable the services.
    $&gt;sudo systemctl restart service-runtime
    $&gt;docker exec -it service_runtime_container /bin/bash -c &apos;cd /etc/runit/runsvdir/default; for s in /etc/sv/*; do ln -sf $s; done&apos;
</code></pre><p><strong>Remove those created folders under /opt/intel/service_runtime and restart the container, which would make any enabled services disabled again.</strong></p>
<pre><code>    $&gt;sudo rm -R /opt/intel/service_runtime/rootfs
</code></pre><h2 id="122-high-level-apis-test-cases-">12.2 High Level APIs test cases <div id="12_2"></div></h2>
<p>Exposed high level APIs test cases which were provided in individual test script way, the usage of each case can be found in the following pages and the cases list are:</p>
<p><strong>(Most test cases have default input which are the preinstalled files under specific folders with the deb package installation. From the WW45&apos;20 release, if you want to use your own input files like images (-i), text (-s), wav (-a), you now can pass input parameters to each test case.)</strong></p>
<h3 id="1221-for-testing-all-provided-api-in-a-bunch-">12.2.1 For testing all provided API in a bunch <div id="12_2_1"></div></h3>
<p>You can test all python implementations with existing test case set -
test-script/run_test_script.sh</p>
<p>Usage:</p>
<pre><code>cd /opt/intel/service_runtime/test-script/
sudo ./run_test_script.sh
</code></pre><h3 id="1222-for-testing-python-implementation-of-related-rest-apis-">12.2.2 For testing python implementation of related REST APIs <div id="12_2_2"></div></h3>
<p>test-script/test-demo/post_local_asr_py.py (the default input audio file(&quot;-a&quot;):
how_are_you_doing.wav; the default inference device(&quot;-d&quot;): GNA_AUTO)</p>
<p>Usage:</p>
<pre><code>cd /opt/intel/service_runtime/test-script/
python3 ./test-demo/post_local_asr_py.py -a &quot;AUDIO_FILE&quot; -d &quot;DEVICE&quot;
</code></pre><p>Result:</p>
<pre><code class="lang-json">{
    <span class="hljs-string">&quot;ret&quot;</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;ok&quot;</span>,
    <span class="hljs-string">&quot;data&quot;</span>: {
        <span class="hljs-string">&quot;text&quot;</span>: <span class="hljs-string">&quot;HOW ARE YOU DOING\n&quot;</span>
    },
    <span class="hljs-string">&quot;time&quot;</span>: <span class="hljs-number">0.777</span>
}

processing time is: <span class="hljs-number">0.7873961925506592</span>
</code></pre>
<p>test-script/test-demo/post_local_classfication_py.py (default input file is classfication.jpg if without input parameter )</p>
<p>Usage:</p>
<pre><code>cd /opt/intel/service_runtime/test-script/
python3 ./test-demo/post_local_classfication_py.py -i &quot;IMAGE_FILE&quot;
</code></pre><p>Result:</p>
<pre><code class="lang-json">{
    <span class="hljs-string">&quot;ret&quot;</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;ok&quot;</span>,
    <span class="hljs-string">&quot;data&quot;</span>: {
        <span class="hljs-string">&quot;tag_list&quot;</span>: [
            {
                <span class="hljs-string">&quot;tag_name&quot;</span>: <span class="hljs-string">&quot;sandal&quot;</span>,
                <span class="hljs-string">&quot;tag_confidence&quot;</span>: <span class="hljs-number">0.7865033745765686</span>
            }
        ]
    },
    <span class="hljs-string">&quot;time&quot;</span>: <span class="hljs-number">0.332</span>
}

processing time is: <span class="hljs-number">0.33770060539245605</span>
</code></pre>
<p>test-script/test-demo/post_local_face_detection_py.py (default input file if without input parameter: face-detection-adas-0001.png)</p>
<p>Usage:</p>
<pre><code>cd /opt/intel/service_runtime/test-script/
python3 ./test-demo/post_local_face_detection_py.py -i &quot;IMAGE_FILE&quot;
</code></pre><p>Result:</p>
<pre><code class="lang-json">{
    <span class="hljs-string">&quot;ret&quot;</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;ok&quot;</span>,
    <span class="hljs-string">&quot;data&quot;</span>: {
        <span class="hljs-string">&quot;face_list&quot;</span>: [
            {
                <span class="hljs-string">&quot;x1&quot;</span>: <span class="hljs-number">611</span>,
                <span class="hljs-string">&quot;y1&quot;</span>: <span class="hljs-number">106</span>,
                <span class="hljs-string">&quot;x2&quot;</span>: <span class="hljs-number">827</span>,
                <span class="hljs-string">&quot;y2&quot;</span>: <span class="hljs-number">322</span>
            },
            {
                <span class="hljs-string">&quot;x1&quot;</span>: <span class="hljs-number">37</span>,
                <span class="hljs-string">&quot;y1&quot;</span>: <span class="hljs-number">128</span>,
                <span class="hljs-string">&quot;x2&quot;</span>: <span class="hljs-number">298</span>,
                <span class="hljs-string">&quot;y2&quot;</span>: <span class="hljs-number">389</span>
            }
        ]
    },

    <span class="hljs-string">&quot;time&quot;</span>: <span class="hljs-number">0.303</span>
}

processing time is: <span class="hljs-number">0.3306546211242676</span>
</code></pre>
<p>test-script/test-demo/post_local_facial_landmark_py.py (default input file if without input parameter: face-detection-adas-0001.png)</p>
<p>Usage:</p>
<pre><code>cd /opt/intel/service_runtime/test-script/
python3 ./test-demo/post_local_facial_landmark_py.py -i &quot;IMAGE_FILE&quot;
</code></pre><p>Result:</p>
<pre><code class="lang-json">{
    <span class="hljs-string">&quot;ret&quot;</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;ok&quot;</span>,
    <span class="hljs-string">&quot;data&quot;</span>: {
        <span class="hljs-string">&quot;image_width&quot;</span>: <span class="hljs-number">916</span>,
        <span class="hljs-string">&quot;image_height&quot;</span>: <span class="hljs-number">502</span>,
        <span class="hljs-string">&quot;face_shape_list&quot;</span>: [
            {
                <span class="hljs-string">&quot;x&quot;</span>: <span class="hljs-number">684.5769672393799</span>,
                <span class="hljs-string">&quot;y&quot;</span>: <span class="hljs-number">198.69771003723145</span>
            },
            {
                <span class="hljs-string">&quot;x&quot;</span>: <span class="hljs-number">664.4035325050354</span>,
                <span class="hljs-string">&quot;y&quot;</span>: <span class="hljs-number">195.72683095932007</span>
            },
            {
            <span class="hljs-string">&quot;x&quot;</span>: <span class="hljs-number">243.1659236550331</span>,
            <span class="hljs-string">&quot;y&quot;</span>: <span class="hljs-number">211.56765642762184</span>
            }
    ]
},
<span class="hljs-string">&quot;time&quot;</span>: <span class="hljs-number">0.644</span>
}
processing time is: <span class="hljs-number">0.6765329837799072</span>
</code></pre>
<p>test-script/test-demo/post_local_ocr_py.py (default input file if without input parameter: intel.jpg )
Usage:</p>
<pre><code>cd /opt/intel/service_runtime/test-script/
python3 ./test-demo/post_local_ocr_py.py -i &quot;IMAGE_FILE&quot;
</code></pre><p>Result:</p>
<pre><code>json
{
    &quot;ret&quot;: 0,
    &quot;msg&quot;: &quot;ok&quot;,
    &quot;data&quot;: {
        &quot;item_list&quot;: [
            {
                &quot;item&quot;: &quot;&quot;,
                &quot;itemcoord&quot;: [
                    {
                        &quot;x&quot;: 159,
                        &quot;y&quot;: 91,
                        &quot;width&quot;: 144,
                        &quot;height&quot;: 83
                    }

                ],
                &quot;itemstring&quot;: &quot;intel&quot;,
                &quot;word&quot;: [
                    {
                        &quot;character&quot;: &quot;i&quot;,
                        &quot;confidence&quot;: 0.9997048449817794
                    },
                    {
                        &quot;character&quot;: &quot;n&quot;,
                        &quot;confidence&quot;: 7342.882333942596
                    },
                    {
                        &quot;character&quot;: &quot;t&quot;,
                        &quot;confidence&quot;: 0.03543140404695105
                    },
                    {
                        &quot;character&quot;: &quot;e&quot;,
                        &quot;confidence&quot;: 2068.173618863451
                    },
                    {
                        &quot;character&quot;: &quot;l&quot;,
                        &quot;confidence&quot;: 0.006070811107476452
                    }
                ]
            },
            {
                &quot;item&quot;: &quot;&quot;,
                &quot;itemcoord&quot;: [
                    {
                        &quot;x&quot;: 203,
                        &quot;y&quot;: 152,
                        &quot;width&quot;: 176,
                        &quot;height&quot;: 78
                    }
                ],
                &quot;itemstring&quot;: &quot;inside&quot;,
                &quot;word&quot;: [
                    {
                        &quot;character&quot;: &quot;i&quot;,
                        &quot;confidence&quot;: 0.9999999989186683
                    },
                    {
                        &quot;character&quot;: &quot;n&quot;,
                        &quot;confidence&quot;: 4.0572939432830824e-08
                    },
                    {
                        &quot;character&quot;: &quot;s&quot;,
                        &quot;confidence&quot;: 0.0015244375426548887
                    },
                    {
                        &quot;character&quot;: &quot;i&quot;,
                        &quot;confidence&quot;: 3807.4854890027605
                    },
                    {
                        &quot;character&quot;: &quot;d&quot;,
                        &quot;confidence&quot;: 0.42974367345764747
                    },
                    {
                        &quot;character&quot;: &quot;e&quot;,
                        &quot;confidence&quot;: 0.008770792351958176
                    }
                ]
            }
        ]
    },
    &quot;time&quot;: 5.69
}
processing time is: 5.702326774597168
</code></pre><p>test-script/test-demo/post_local_policy_py.py</p>
<p><strong>The default accelerator will be CPU if no change, once you set another accelerator with policy setting API, it will always take effect before you explicitly change it.</strong></p>
<p>Usage:</p>
<pre><code>cd /opt/intel/service_runtime/test-script/
python3 ./test-demo/post_local_policy_py.py -d CPU -l 1
</code></pre><p>Result:</p>
<pre><code>successfully set the policy daemon
processing time is: 0.004211902618408203
</code></pre><p>test-script/test-demo/post_local_tts_py.py (default input file if without input
parameter: test_sentence.txt)</p>
<p><strong>(So far, for easy testing of the pipeline, we had some rules on TTS input: the
input must be an English string and be saved in test_sentence.txt.)</strong></p>
<p>Usage:</p>
<pre><code>cd /opt/intel/service_runtime/test-script/
sudo python3 ./test-demo/post_local_tts_py.py -s &quot;SENTENCE_FILE&quot;
</code></pre><p>Result:</p>
<pre><code class="lang-json">{
    <span class="hljs-string">&quot;ret&quot;</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;ok&quot;</span>,
    <span class="hljs-string">&quot;data&quot;</span>: {
        <span class="hljs-string">&quot;format&quot;</span>: <span class="hljs-number">2</span>,
        <span class="hljs-string">&quot;speech&quot;</span>: <span class="hljs-string">&quot;UklGRjL4Aw...&quot;</span>
        <span class="hljs-string">&quot;md5sum&quot;</span>: <span class="hljs-string">&quot;3bae7bf99ad32bc2880ef1938ba19590&quot;</span>
    },
    <span class="hljs-string">&quot;time&quot;</span>: <span class="hljs-number">7.283</span>
}
processing time is: <span class="hljs-number">7.824979066848755</span>
</code></pre>
<h3 id="1223-for-testing-c-implementation-of-related-rest-apis-">12.2.3 For testing C++ implementation of related REST APIs <div id="12_2_3"></div></h3>
<p>test-script/test-demo/post_local_asr_c.py (the default input audio file(&quot;-a&quot;):
how_are_you_doing.wav; the default inference device(&quot;-d&quot;): GNA_AUTO)</p>
<p>usage:</p>
<pre><code>cd /opt/intel/service_runtime/test-script/
python3 ./test-demo/post_local_asr_c.py -a &quot;AUDIO_FILE&quot; -d &quot;DEVICE&quot;
</code></pre><p>Result:</p>
<pre><code>json
{
    &quot;ret&quot;:0,
    &quot;msg&quot;:&quot;ok&quot;,
    &quot;data&quot;:{
        &quot;text&quot;:HOW ARE YOU DOING
    },
    &quot;time&quot;:0.695
}
processing time is: 0.6860318183898926
</code></pre><p>test-script/test-demo/post_local_classfication_c.py (default input file if
without input parameter: classfication.jpg)</p>
<p>Usage:</p>
<pre><code>cd /opt/intel/service_runtime/test-script/
python3 ./test-demo/post_local_classfication_c.py -i &quot;IMAGE_FILE&quot;
</code></pre><p>Result:</p>
<pre><code>json
{
    &quot;ret&quot;:0,
    &quot;msg&quot;:&quot;ok&quot;,
    &quot;data&quot;:{
        &quot;tag_list&quot;:[
            {&quot;tag_name&quot;:&apos;sandal&apos;,&quot;tag_confidence&quot;:0.786503}

        ]
    },
    &quot;time&quot;:0.380
}
processing time is: 0.36538004875183105
</code></pre><p>test-script/test-demo/post_local_face_detection_c.py (default input file if
without input parameter: face-detection-adas-0001.xml)</p>
<p>Usage:</p>
<pre><code>cd /opt/intel/service_runtime/test-script/
python3 ./test-demo/post_local_face_detection_c.py -i &quot;IMAGE_FILE&quot;
</code></pre><p>Result:</p>
<pre><code class="lang-json">{
    <span class="hljs-string">&quot;ret&quot;</span>:<span class="hljs-number">0</span>,
    <span class="hljs-string">&quot;msg&quot;</span>:<span class="hljs-string">&quot;ok&quot;</span>,
    <span class="hljs-string">&quot;data&quot;</span>:{
        <span class="hljs-string">&quot;face_list&quot;</span>:[
            {
                <span class="hljs-string">&quot;x1&quot;</span>:<span class="hljs-number">655</span>,
                <span class="hljs-string">&quot;y1&quot;</span>:<span class="hljs-number">124</span>,
                <span class="hljs-string">&quot;x2&quot;</span>:<span class="hljs-number">783</span>,
                <span class="hljs-string">&quot;y2&quot;</span>:<span class="hljs-number">304</span>
            },
            {
                <span class="hljs-string">&quot;x1&quot;</span>:<span class="hljs-number">68</span>,
                <span class="hljs-string">&quot;y1&quot;</span>:<span class="hljs-number">149</span>,
                <span class="hljs-string">&quot;x2&quot;</span>:<span class="hljs-number">267</span>,
                <span class="hljs-string">&quot;y2&quot;</span>:<span class="hljs-number">367</span>
            } ]
    },
    <span class="hljs-string">&quot;time&quot;</span>:<span class="hljs-number">0.305</span>
}
processing time is: <span class="hljs-number">0.3104386329650879</span>
</code></pre>
<p>test-script/test-demo/post_local_facial_landmark_c.py (default input file if
without input parameter: face-detection-adas-0001.xml)</p>
<p>Usage:</p>
<pre><code>cd /opt/intel/service_runtime/test-script/
python3 ./test-demo/post_local_facial_landmark_c.py -i &quot;IMAGE_FILE&quot;
</code></pre><p>Result:</p>
<pre><code>json
{
    &quot;ret&quot;:0,
    &quot;msg&quot;:&quot;ok&quot;,
    &quot;data&quot;:{
        &quot;image_width&quot;:916.000000,
        &quot;image_height&quot;:502.000000,
        &quot;face_shape_list&quot;:[
            {&quot;x&quot;:684.691284,
             &quot;y&quot;:198.765793},
            {&quot;x&quot;:664.316528,
             &quot;y&quot;:195.681824},
            {&quot;x&quot;:241.314194,
             &quot;y&quot;:211.847031}
           ]
    }
},
&quot;time&quot;:0.623
}
processing time is: 0.6292879581451416
</code></pre><p>test-script/test-demo/post_local_ocr_c.py (default input file if without input
parameter: intel.jpg)</p>
<p>Usage:</p>
<pre><code>cd /opt/intel/service_runtime/test-script/
python3 ./test-demo/post_local_ocr_c.py -i &quot;IMAGE_FILE&quot;
</code></pre><p>Result:</p>
<pre><code class="lang-json">{
    <span class="hljs-string">&quot;ret&quot;</span>:<span class="hljs-number">0</span>,
    <span class="hljs-string">&quot;msg&quot;</span>:<span class="hljs-string">&quot;ok&quot;</span>,
    <span class="hljs-string">&quot;data&quot;</span>:{
        <span class="hljs-string">&quot;item_list&quot;</span>:[
            {
                <span class="hljs-string">&quot;itemcoord&quot;</span>:[
                    {
                        <span class="hljs-string">&quot;x&quot;</span>:<span class="hljs-number">161.903748</span>,
                        <span class="hljs-string">&quot;y&quot;</span>:<span class="hljs-number">91.755684</span>,
                        <span class="hljs-string">&quot;width&quot;</span>:<span class="hljs-number">141.737503</span>,
                        <span class="hljs-string">&quot;height&quot;</span>:<span class="hljs-number">81.645004</span>
                    }
                ],
                <span class="hljs-string">&quot;words&quot;</span>:[
                    {
                        <span class="hljs-string">&quot;character&quot;</span>:i,
                        <span class="hljs-string">&quot;confidence&quot;</span>:<span class="hljs-number">0.999999</span>
                    },
                    {
                        <span class="hljs-string">&quot;character&quot;</span>:n,
                        <span class="hljs-string">&quot;confidence&quot;</span>:<span class="hljs-number">0.999998</span>
                    },
                    {
                        <span class="hljs-string">&quot;character&quot;</span>:t,
                        <span class="hljs-string">&quot;confidence&quot;</span>:<span class="hljs-number">0.621934</span>
                    },
                    {
                        <span class="hljs-string">&quot;character&quot;</span>:e,
                        <span class="hljs-string">&quot;confidence&quot;</span>:<span class="hljs-number">0.999999</span>
                    },
                    {
                        <span class="hljs-string">&quot;character&quot;</span>:l,
                        <span class="hljs-string">&quot;confidence&quot;</span>:<span class="hljs-number">0.999995</span>
                    } ],
                <span class="hljs-string">&quot;itemstring&quot;</span>:intel
            },
            {
                <span class="hljs-string">&quot;itemcoord&quot;</span>:[
                    {
                        <span class="hljs-string">&quot;x&quot;</span>:<span class="hljs-number">205.378326</span>,
                        <span class="hljs-string">&quot;y&quot;</span>:<span class="hljs-number">153.429291</span>,
                        <span class="hljs-string">&quot;width&quot;</span>:<span class="hljs-number">175.314835</span>,
                        <span class="hljs-string">&quot;height&quot;</span>:<span class="hljs-number">77.421722</span>
                    }
                ],
                <span class="hljs-string">&quot;words&quot;</span>:[
                    {
                        <span class="hljs-string">&quot;character&quot;</span>:i,
                        <span class="hljs-string">&quot;confidence&quot;</span>:<span class="hljs-number">1.000000</span>
                    },
                    {
                        <span class="hljs-string">&quot;character&quot;</span>:n,
                        <span class="hljs-string">&quot;confidence&quot;</span>:<span class="hljs-number">1.000000</span>
                    },
                    {
                        <span class="hljs-string">&quot;character&quot;</span>:s,
                        <span class="hljs-string">&quot;confidence&quot;</span>:<span class="hljs-number">1.000000</span>
                    },
                    {
                        <span class="hljs-string">&quot;character&quot;</span>:i,
                        <span class="hljs-string">&quot;confidence&quot;</span>:<span class="hljs-number">0.776524</span>
                    },
                    {
                        <span class="hljs-string">&quot;character&quot;</span>:d,
                        <span class="hljs-string">&quot;confidence&quot;</span>:<span class="hljs-number">1.000000</span>
                    },
                    {
                        <span class="hljs-string">&quot;character&quot;</span>:e,
                        <span class="hljs-string">&quot;confidence&quot;</span>:<span class="hljs-number">1.000000</span>
                    } ],
                <span class="hljs-string">&quot;itemstring&quot;</span>:inside
            } ]
    },
    <span class="hljs-string">&quot;time&quot;</span>:<span class="hljs-number">1.986</span>
}
processing time is: <span class="hljs-number">1.975726842880249</span>
</code></pre>
<p>test-script/test-demo/post_local_speech_c.py (default input file if without
input parameter: dev93_1_8.ark)</p>
<p><strong>This case is used to verify GNA accelerators. The default setting is GNA_AUTO.
If GNA HW is ready, the inference will run on GNA HW. Otherwise, it will run on
GNA_SW mode to simulate GNA HW.</strong></p>
<p>usage:</p>
<pre><code>cd /opt/intel/service_runtime/test-script/
python3 ./test-demo/post_local_speech_c.py
</code></pre><p>Result:</p>
<pre><code>json
{
    &quot;ret&quot;:0,
    &quot;msg&quot;:&quot;ok&quot;,
    &quot;data&quot;:{
        &quot;input information(name:dimension)&quot;:{
            &quot;Parameter&quot;:[8,440]
        },
        &quot;output information(name:dimension)&quot;:{
            &quot;affinetransform14/Fused_Add_&quot;:[8,3425]
        }
    },
    &quot;time&quot;:0.344222
}
{
    &quot;ret&quot;:0,
    &quot;msg&quot;:&quot;ok&quot;,
    &quot;data&quot;:{
        &quot;result&quot;:&quot;success!&quot;
    },
    &quot;time&quot;:0.484783
}
fcgi inference time: 0.009104
processing time is: 0.0262906551361084
</code></pre><p>test-script/test-demo/post_local_policy_c.py</p>
<p><strong>The default accelerator will be CPU if no change, once you set another
accelerator with policy setting API, it will always take effect before you
explicitly change it.</strong></p>
<p>Usage:</p>
<pre><code>cd /opt/intel/service_runtime/test-script/
python3 ./test-demo/post_local_policy_c.py -d CPU -l 1
</code></pre><p>Result:</p>
<pre><code>successfully set the policy daemon
processing time is: 0.0035839080810546875
</code></pre><h3 id="1224-for-testing-c-implementation-of-related-grpc-apis-">12.2.4 For testing C++ implementation of related gRPC APIs <div id="12_2_4"></div></h3>
<p>grpc_inference_service_test.py</p>
<p>Usage:</p>
<pre><code>cd /opt/intel/service_runtime/test-script/
python3 ./test-grpc/grpc_inference_service_test.py
</code></pre><p>Result:</p>
<pre><code>HealthCheck resp: 0
ASR result:
{&quot;text&quot;:&quot;HOW ARE YOU DOING&quot;}
Classification result:
[{&quot;tag_name&quot;:&quot;sandal&quot;,&quot;tag_confidence&quot;:0.743236}]
FaceDetection result:
{&quot;x1&quot;:611,&quot;y1&quot;:106,&quot;x2&quot;:827,&quot;y2&quot;:322},{&quot;x1&quot;:37,&quot;y1&quot;:128,&quot;x2&quot;:298,&quot;y2&quot;:389}
FacialLandmark result:
{&quot;x&quot;:684,&quot;y&quot;:198},{&quot;x&quot;:664,&quot;y&quot;:195}, &#x2026;
OCR result:
[{&quot;itemcoord&quot;:{&quot;x&quot;:162,&quot;y&quot;:91,&quot;width&quot;: &#x2026;
</code></pre><h2 id="123-health-monitor-mechanism-test-case-">12.3 Health-monitor mechanism test case <div id="12_3"></div></h2>
<h3 id="1231-test-case-">12.3.1 Test case <div id="12_3_1"></div></h3>
<p>This test case will take about two minutes, please wait.
test-script/test-health-monitor/test_health_monitor.sh
Usage:</p>
<pre><code>cd /opt/intel/service_runtime/test-script/
./test-health-monitor/test_health_monitor.sh
</code></pre><p>Result:</p>
<pre><code>*******************************
test fcgi and grpc daemon:
fcgi can automatic restart
grpc can automatic restar
*******************************
test container:
f64fed060cf1 fe50c5747d46 &quot;/start.sh&quot; 2 minutes ago Up 2 minutes (unhealthy)
0.0.0.0:8080-8081-&gt;8080-8081/tcp service_runtime_container
service_runtime_container
restart container...
7f20255d36a9 fe50c5747d46 &quot;/start.sh&quot; About a minute ago Up About a minute
(health: starting) 0.0.0.0:8080-8081-&gt;8080-8081/tcp service_runtime_container
container can automatic restart
</code></pre><h3 id="1232-how-it-works-in-brief-">12.3.2 How it works (in brief) <div id="12_3_2"></div></h3>
<p>The health monitor mechanism consisted of 2 parts: health-monitor daemon
installed in the host system, and its agent installed inside the container.</p>
<p>The agent will check all background running services, daemons and API gateways
in a 60 seconds (it is the default value, can be customized via parameter to
start command) interval and report the healthy status to the host
health-monitor. Meanwhile, under situations where daemon or services fail to
respond, according to specific cases, the agent may try to restart those failed
processes and then confirm those processes work normally, or rely on API
gateways to restart related services and then confirm those services work
normally. Whichever cases, the agent will report those information to
health-monitor as record and the preconditions of taking additional actions if
needed. If the agent itself or API gateways cannot make the processes work
again, then that information will also be reported to the host health-monitor
and then the health-monitor will decide how to restart the docker instance
according to some predefined rules.</p>
<p>In the test case above, it will try to kill these services and container
instance respectively and then re-check the status to make sure the health
monitor mechanism works as expected. The output log &apos;xxxxxx restart&apos; is meaning
related services/components were killed and then restarted successfully.</p>
<p>For health monitor related log, you can find them by:</p>
<pre><code>    $&gt; sudo journalctl -f -u service-runtime-health-monitor.service
</code></pre><h2 id="124-deb-package-for-host-installed-applicationservice-if-not-install-yet-">12.4 Deb package for host installed application/service (if not install yet) <div id="12_4"></div></h2>
<p><strong>Note: If not for testing the OTA process, then please uninstall existing
packages before installing the new ones to avoid &quot;possible&quot; conflicts with OTA
logic.</strong></p>
<pre><code>service-runtime_1.0-210201_all.deb
service-runtime-test_1.0-210201_all.deb
</code></pre><p>Installation instructions:</p>
<pre><code>dpkg -i *.deb
</code></pre><h2 id="125-deb-package-for-host-installed-neural-network-models-if-not-install-yet-">12.5 Deb package for host installed neural network models (if not install yet) <div id="12_5"></div></h2>
<p><strong>Note: If not for testing the OTA process, then please uninstall existing
packages before install the new ones to avoid &quot;possible&quot; conflicts with OTA
logic.</strong></p>
<pre><code>service-runtime-models-classification_1.0-210201_all.deb
service-runtime-models-deeplab_1.0-210201_all.deb
service-runtime-models-face-detection_1.0-210201_all.deb
service-runtime-models-facial-landmarks_1.0-210201_all.deb
service-runtime-models-lspeech-s5-ext_1.0-210201_all.deb
service-runtime-models-ocr_1.0-210201_all.deb
service-runtime-models-tts_1.0-210201_all.deb
service-runtime-models-wsj-dnn5b_1.0-210201_all.deb
service-runtime-models-cl-cache_1.0-210201_all.deb
</code></pre><p>Installation instructions:</p>
<pre><code>dpkg -i *.deb
</code></pre>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../part11/#12" class="navigation navigation-prev " aria-label="Previous page: 11.5 Smart Photo Search">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="./#12_1" class="navigation navigation-next " aria-label="Next page: 12.1 Enabled services for testing">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"12. Test cases and packages installation","level":"1.14","depth":1,"next":{"title":"12.1 Enabled services for testing","level":"1.14.1","depth":2,"anchor":"#12_1","path":"part12/README.md","ref":"part12/README.md#12_1","articles":[]},"previous":{"title":"11.5 Smart Photo Search","level":"1.13","depth":1,"anchor":"#12","path":"part11/README.md","ref":"part11/README.md#12","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["splitter","livereload"],"pluginsConfig":{"splitter":{},"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"part12/README.md","mtime":"2022-08-26T02:51:50.440Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2022-08-26T02:56:04.675Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

